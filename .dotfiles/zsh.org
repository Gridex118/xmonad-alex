#+Author: Alex Rosegrid
#+Title: Zsh Configuration
#+Startup: show2levels

* ZProfile

Clear all the useless startup messages.
On the first /tty/ terminal, open an X session on startup.
Also, during an X session, inhibit the power button. If the system OOMs, it probably won't respond anyway.
#+begin_src shell :tangle .zprofile
  clear

  if [ -z "$DISPLAY" ] && [ "$XDG_VTNR" -eq 1 ]; then
      systemd-inhibit \
	  --what=handle-power-key \
	  --why="Restrict power key in Graphical environment" \
	  startx &>/dev/null
      logout
  fi
#+end_src


* Aliases

** Eye Candy For Some Shell Commands
#+begin_src shell :tangle .zsh/.zalias
  alias ls="ls --color"
  alias grep="grep --color"
  alias cat="bat --theme TwoDark"
#+end_src

** Shortcuts
#+begin_src shell :tangle .zsh/.zalias
  alias tmat="tmux attach -dt"
  alias t0="tmux attach -dt0"
  alias tmls="tmux list-sessions"
  alias gccintel="gcc -S -masm=intel -Og -fverbose-asm"
  alias neofetch="fastfetch --config neofetch.jsonc"
  alias rexmonad="xmoand --recompile&& xmoand --restart"
  alias rexinit="grep -P '(xinput|xset|setxkb)' ~/.xinitrc| bash -"
  alias wallpaper="nitrogen --no-recurse ~/Wallpapers/"
#+end_src


* Key Bindings
#+begin_src shell :tangle .zsh/.zkeys
  bindkey "^[[H" beginning-of-line
  bindkey "^[[F" end-of-line
  bindkey "^[[3~" delete-char
  bindkey "^h" autosuggest-accept
#+end_src


* Zshrc

This needs to be =sourced= inside the =~/.zshrc= file, as such
#+begin_src shell
  source ~/.zsh/.zshrc
#+end_src

** Lines Configured by /zsh-newuser-install/
#+begin_src shell :tangle .zsh/.zshrc
  HISTFILE=~/.histfile
  HISTSIZE=1000
  SAVEHIST=1000
  setopt autocd histignorespace

  autoload -Uz compinit
  compinit
#+end_src

** Initialize some Programs
#+begin_src shell :tangle .zsh/.zshrc
  eval "$(zoxide init zsh)"
  eval "$(fzf --zsh)"
#+end_src

** Source Companion Files
#+begin_src shell :tangle .zsh/.zshrc
  source ~/.zsh/themes/p10k/powerlevel10k.zsh-theme
  source ~/.zsh/lib/zsh-autosuggestions.zsh
  source ~/.zsh/.zalias
  source ~/.zsh/.zkeys
#+end_src
